# ğŸš€ App-Ingress-TLS & Cluster-Infrastructure

**Deploy AWS EKS clusters & secure app routing with NGINX Ingress and Cert-Manager using Terraform.**

***

## ğŸ“¦ Project Structure

### Phase 1: Cluster Infrastructure

eks.tf â†’ EKS cluster setup
node_group.tf â†’ Worker nodes
iam.tf â†’ IAM roles & policies
vpc.tf â†’ Networking (VPC, subnets)
provider.tf â†’ Terraform provider config
variables.tf â†’ Input variables
outputs.tf â†’ Terraform outputs
terraform.tfstate â†’ Terraform state

text

### Phase 2: App, Ingress & TLS

app.tf â†’ Application deployment
nginx_ingress.tf â†’ NGINX Ingress controller
cert_manager.tf â†’ Cert-Manager deployment
cert_issuer.tf â†’ ClusterIssuer (TLS)
ingress.tf â†’ Ingress rules
route53.tf â†’ DNS record setup
k8s_providers.tf â†’ Kubernetes provider
terraform.tfstate â†’ Terraform state

text

***

## âš ï¸ Initial Problem

- CrashLoopBackOff for NGINX and app pods
- Cert-Manager initialization failures
- Route53 DNS creation errors

**Reason:** Terraform tried to deploy workloads before the cluster/nodes were ready.

***

## ğŸ› ï¸ Solution: Two-Phase Deployment

**Phase 1 â€“ Infrastructure**  
Build: VPC â†’ EKS Cluster â†’ Node Groups (workers)  
*Outcome: Cluster and nodes are ready; Terraform tracks infrastructure*

**Phase 2 â€“ Apps & Routing**  
Deploy: Namespaces â†’ NGINX Ingress â†’ Cert-Manager (TLS) â†’ Applications (+Ingress) â†’ Route53 DNS  
*Outcome: Apps available via your domain, TLS auto-applied, NGINX routes traffic correctly*

***

## âœ… Final Workflow

- [Your Domain] â†’ Route53 DNS â†’ NGINX Load Balancer â†’ Applications (+TLS)

***

## ğŸ“ Key Learnings

- Split deployments: Infra & workloads separate
- Always check logs: `kubectl logs`
- Ignore `.tfstate` files in Git
- Use ConfigMaps for configuration

***

## ğŸ§‘â€ğŸ’» How to Use

```bash
# Phase 1: Infrastructure
cd Cluster-Infrastructure
terraform init
terraform apply

# Phase 2: Applications & Ingress
cd App-Ingress-TLS
terraform init
terraform apply
ğŸ” Verification
kubectl get pods -A

kubectl get svc -n ingress-nginx

Confirm your DNS record points to the NGINX load balancer

Enjoy a production-ready EKS cluster with secure, automated TLS!