ğŸš€ App-Ingress-TLS & Cluster-Infrastructure
Deploy AWS EKS clusters & secure app routing with NGINX Ingress and Cert-Manager using Terraform.

ğŸ“¦ Project Structure
Phase 1: Cluster Infrastructure
text
eks.tf       â†’ EKS cluster setup
node_group.tf â†’ Worker nodes
iam.tf       â†’ IAM roles & policies
vpc.tf       â†’ Networking (VPC, subnets)
provider.tf  â†’ Terraform provider config
variables.tf â†’ Input variables
outputs.tf   â†’ Terraform outputs
terraform.tfstate â†’ Terraform state
Phase 2: App, Ingress & TLS
text
app.tf            â†’ Application deployment
nginx_ingress.tf  â†’ NGINX Ingress controller
cert_manager.tf   â†’ Cert-Manager deployment
cert_issuer.tf    â†’ ClusterIssuer (TLS)
ingress.tf        â†’ Ingress rules
route53.tf        â†’ DNS record setup
k8s_providers.tf  â†’ Kubernetes provider
terraform.tfstate â†’ Terraform state
âš ï¸ Initial Problem
Deploying everything at once caused:

CrashLoopBackOff for NGINX and app pods

Cert-Manager initialization failures

Route53 DNS creation errors

Reason: Terraform tried to deploy workloads before the cluster/nodes were ready.

ğŸ› ï¸ Solution: Two-Phase Deployment
1ï¸âƒ£ Infrastructure First
text
graph TD;
    VPC --> EKS --> Nodes
Cluster and nodes are ready before app workloads.

2ï¸âƒ£ App & Ingress Second
text
graph TD;
    Namespaces --> NGINX_Ingress --> Cert_Manager --> Applications_Ingress --> Route53_DNS
TLS and app routing deploy only after the cluster is up.

âœ… Final Workflow
[Your Domain] â†’ Route53 DNS â†’ NGINX Load Balancer â†’ Applications (+TLS)

ğŸ“ Key Learnings
Split deployments: Infra & workloads separate.

Always check logs: kubectl logs for troubleshooting.

Ignore .tfstate files in Git.

Use ConfigMaps for configurations.

ğŸ§‘â€ğŸ’» Usage
bash
# Phase 1: Infrastructure
cd Cluster-Infrastructure
terraform init
terraform apply

# Phase 2: Applications & Ingress
cd App-Ingress-TLS
terraform init
terraform apply
ğŸ” Verification
kubectl get pods -A

kubectl get svc -n ingress-nginx

Enjoy a production-ready cluster with secure external access!

